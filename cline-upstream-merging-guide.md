### 2.2. 파일별 병합 (File-by-File Merging) - AI 도구 활용

**일반 원칙:**
*   **도구 사용 후 확인:** `replace_in_file` 또는 `write_to_file` 사용 후에는 반드시 마스터의 성공/실패 응답과 `final_file_content`를 기다립니다.

**병합 우선순위 및 주요 절차:**

1.  **Upstream 단독 변경 파일 우선 적용:**
    *   **대상 식별:** `git diff`를 통해 파악된 `cline-upstream` 변경 목록과 `caret-zero` (현재 프로젝트)의 기준 커밋 이후 변경 목록을 비교하여, `cline-upstream`에서만 수정되고 `caret-zero`에서는 변경되지 않은 파일을 식별합니다.
    *   **적용:** 식별된 파일들은 `cline-upstream` 버전으로 `caret-zero`에 덮어쓰기(`write_to_file`)를 우선적으로 고려합니다. (단, 해당 파일이 우리 커스텀 로직과 전혀 무관한지 재확인 필요)

2.  **전역 문자열 치환 (Branding Alignment):**
    *   Upstream 파일을 가져온 후 (또는 경우에 따라 가져오기 전), 프로젝트 전체 또는 병합 대상 파일들에 대해 다음 문자열 치환을 수행합니다:
        *   `cline` → `caret`
        *   `Cline` → `Caret`
        *   `CLINE` → `CARET`
    *   이 작업은 `replace_in_file` 도구를 사용하여 파일별로 수행하거나, 마스터의 지시에 따라 더 광범위한 스크립트 실행을 요청할 수 있습니다. 이를 통해 프로젝트의 네이밍 일관성을 확보합니다.

3.  **나머지 파일 순차적/분석적 병합:**
    *   위 두 단계를 거친 후 남은 파일들 (양쪽 모두 변경되었거나, 분석이 필요한 파일들)에 대해 아래의 "단계별 지침"에 따라 순차적으로 병합을 진행합니다.
    *   **사용하지 않는 코드 식별 및 제거:** 병합 과정에서 Upstream의 변경으로 인해 더 이상 사용되지 않는 `caret-zero`의 기존 코드(함수, 변수, 클래스 등)가 있는지 분석합니다. 마스터와 확인 후 안전하게 제거합니다.
    *   **필요한 신규 코드/로직 통합:** Upstream에서 새로 추가되었거나 변경된 기능 중 우리 프로젝트에 필요한 부분을 식별하고 통합합니다. 단순 복사-붙여넣기가 아닌, 기존 `caret-zero` 아키텍처 및 커스텀 로직과의 조화를 고려하여 신중하게 적용합니다.

**단계별 지침:** 