# Caret-Zero: Cline μ—…μ¤νΈλ¦Ό λ³‘ν•© κ°€μ΄λ“

**μ‘μ„±μ**: Alpha Yang
**λ©μ **: `cline` μ›λ³Έ μ €μ¥μ†μ μµμ‹  λ³€κ²½ μ‚¬ν•­μ„ `caret-zero` ν”„λ΅μ νΈμ— μ•μ „ν•κ² λ³‘ν•©ν•λ” μ μ°¨μ™€ μ£Όμ” ν•΄κ²° λ°©μ•μ„ μ•λ‚΄ν•©λ‹λ‹¤. μ΄ κ°€μ΄λ“λ” μ‹ κ· κ°λ°μλ„ ν”„λ΅μ νΈμ μ•„ν‚¤ν…μ²λ¥Ό μ΄ν•΄ν•κ³  μ‘μ—…μ„ μν–‰ν•  μ μλ„λ΅ μƒμ„Έν• μ„¤λ…μ„ μ κ³µν•©λ‹λ‹¤.

---

## 1. μ•„ν‚¤ν…μ² μ΄ν•΄: μ¤λ²„λ μ΄ κµ¬μ΅°

`caret-zero`λ” `cline`μ λΉ λ¥Έ κ°λ° μ†λ„μ— ν¨κ³Όμ μΌλ΅ λ€μ‘ν•κΈ° μ„ν•΄ **μ¤λ²„λ μ΄ μ•„ν‚¤ν…μ²(Overlay Architecture)**λ¥Ό μ±„νƒν•κ³  μμµλ‹λ‹¤.

- **`cline/` λ””λ ‰ν† λ¦¬ (κΈ°λ° λ μ΄μ–΄)**: `cline` μ›λ³Έ μ†μ¤ μ½”λ“λ¥Ό κ΄€λ¦¬ν•λ” κ³µκ°„μ…λ‹λ‹¤. μ£ΌκΈ°μ μΌλ΅ μ—…μ¤νΈλ¦Όμ μµμ‹  μ½”λ“λ¥Ό κ°€μ Έμ™€ μ—…λ°μ΄νΈν•©λ‹λ‹¤.
- **`caret/` λ””λ ‰ν† λ¦¬ (μ¤λ²„λ μ΄ λ μ΄μ–΄)**: `caret-zero`λ§μ κ³ μ  κΈ°λ¥(νλ¥΄μ†λ‚, λ¨λ“ λ“±)μ„ κµ¬ν„ν•λ” κ³µκ°„μ…λ‹λ‹¤. `cline`μ κΈ°λ¥μ„ ν™•μ¥ν•κ±°λ‚ λ³€κ²½ν•λ” μ½”λ“κ°€ μ—¬κΈ°μ— μ„μΉν•©λ‹λ‹¤.
- **ν†µν•© μ§„μ…μ  (`src/`)**: `cline`κ³Ό `caret`μ κΈ°λ¥μ„ μ΅°ν•©ν•μ—¬ μµμΆ…μ μΌλ΅ ν™•μ¥ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•λ” μ—­ν• μ„ ν•©λ‹λ‹¤.

### π“ **ν•µμ‹¬ μ›μΉ™: `cline` λ””λ ‰ν† λ¦¬ μμ • κΈμ§€**

`cline` λ””λ ‰ν† λ¦¬μ μ½”λ“λ” μ—…μ¤νΈλ¦Όκ³Ό λ™μΌν• μƒνƒλ¥Ό μ μ§€ν•λ” κ²ƒμ„ μ›μΉ™μΌλ΅ ν•©λ‹λ‹¤. μ΄λ” λ³‘ν•© μ‹ λ°μƒν•λ” μ¶©λμ„ μµμ†ν™”ν•κ³ , μ›λ³Έκ³Όμ μ°¨μ΄μ μ„ λ…ν™•ν•κ² κ΄€λ¦¬ν•κΈ° μ„ν•¨μ…λ‹λ‹¤. `cline`μ μ½”λ“λ¥Ό μ§μ ‘ μμ •ν•λ” λ€μ‹ , `caret` λ μ΄μ–΄μ—μ„ κΈ°λ¥μ„ λν•‘ν•κ±°λ‚ μ¤λ²„λΌμ΄λ“ν•λ” λ°©μ‹μΌλ΅ κΈ°λ¥μ„ κµ¬ν„ν•΄μ•Ό ν•©λ‹λ‹¤.

(λ‹¨, μ•„λ 'λ¬Έμ  ν•΄κ²°' μ„Ήμ…μ—μ„ μ„¤λ…ν•λ” λΉλ“ ν™κ²½ νΈν™μ„± λ¬Έμ μ™€ κ°™μ€ μμ™Έμ μΈ κ²½μ°λ” μ μ™Έν•©λ‹λ‹¤.)

---

## 2. λ³‘ν•© μ μ°¨ (Step-by-Step)

### 2.1. μ‚¬μ „ μ¤€λΉ„: Upstream μ›κ²© μ €μ¥μ† ν™•μΈ

λ¨Όμ € `cline`μ μ›λ³Έ μ €μ¥μ†κ°€ git μ›κ²©(remote)μΌλ΅ λ“±λ΅λμ–΄ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤. μΌλ°μ μΌλ΅ `upstream`μ΄λΌλ” μ΄λ¦„μ„ μ‚¬μ©ν•©λ‹λ‹¤.

```bash
git remote -v
# upstream  https://github.com/care-t/care.git (fetch)
# upstream  https://github.com/care-t/care.git (push)
```

λ§μ•½ `upstream`μ΄ λ“±λ΅λμ–΄ μμ§€ μ•λ‹¤λ©΄, μ•„λ λ…λ Ήμ–΄λ΅ μ¶”κ°€ν•©λ‹λ‹¤.

```bash
git remote add upstream https://github.com/cline/cline
```

### 2.2. Upstream λ³€κ²½ μ‚¬ν•­ κ°€μ Έμ¤κΈ°

`git subtree pull` λ…λ Ήμ„ μ‚¬μ©ν•μ—¬ `upstream`μ μµμ‹  λ³€κ²½ μ‚¬ν•­μ„ `cline` λ””λ ‰ν† λ¦¬λ΅ λ³‘ν•©ν•©λ‹λ‹¤.

```bash
# git subtree pull --prefix=<ν•μ„ λ””λ ‰ν† λ¦¬> <μ›κ²© μ €μ¥μ† μ΄λ¦„> <λΈλμΉλ…> --squash
git subtree pull --prefix=cline upstream main --squash
```

- `--prefix=cline`: `cline` λ””λ ‰ν† λ¦¬μ— λ³€κ²½ μ‚¬ν•­μ„ μ μ©ν•©λ‹λ‹¤.
- `upstream main`: `upstream` μ›κ²© μ €μ¥μ†μ `main` λΈλμΉλ¥Ό κ°€μ Έμµλ‹λ‹¤.
- `--squash`: μ—…μ¤νΈλ¦Όμ μ»¤λ°‹ νμ¤ν† λ¦¬λ¥Ό ν•λ‚λ΅ ν•©μ³μ„ κ°€μ Έμµλ‹λ‹¤. ν”„λ΅μ νΈμ λ©”μΈ νμ¤ν† λ¦¬λ¥Ό κΉ”λ”ν•κ² μ μ§€ν•λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤.

### 2.3. μ¶©λ ν•΄κ²° (Conflict Resolution)

λ³‘ν•© κ³Όμ •μ—μ„ μ¶©λμ΄ λ°μƒν•  μ μμµλ‹λ‹¤. `package.json`, `package-lock.json` λ“±μ—μ„ μ¶©λμ΄ μμ£Ό λ°μƒν•©λ‹λ‹¤.

- **μ¶©λ ν•΄κ²° μ›μΉ™**: `cline`μ λ³€κ²½ μ‚¬ν•­μ„ μµλ€ν• μ΅΄μ¤‘ν•λ, `caret-zero`μ ν•µμ‹¬ μμ΅΄μ„±μ΄λ‚ μ„¤μ •μ΄ κΉ¨μ§€μ§€ μ•λ„λ΅ μ£Όμν•©λ‹λ‹¤.
- VSCodeμ™€ κ°™μ€ λ„κµ¬λ¥Ό μ‚¬μ©ν•μ—¬ μ¶©λ λ¶€λ¶„μ„ ν•λ‚μ”© ν™•μΈν•κ³ , "incoming change"(`cline`μ λ³€κ²½)λ¥Ό μ„ νƒν• μ§€ "current change"(ν„μ¬ μ½”λ“)λ¥Ό μ μ§€ν• μ§€ κ²°μ •ν•©λ‹λ‹¤.
- μ¶©λ ν•΄κ²° ν›„, νμΌμ„ μ €μ¥ν•κ³  `git add <μ¶©λ ν•΄κ²°λ νμΌ>` λ…λ ΉμΌλ΅ μ¤ν…μ΄μ§•ν•©λ‹λ‹¤.

λ¨λ“  μ¶©λμ„ ν•΄κ²°ν• ν›„, λ³‘ν•© μ»¤λ°‹μ„ μ™„λ£ν•©λ‹λ‹¤.
```bash
git commit
```

---

## 3. λΉλ“ λ° κ²€μ¦

λ³‘ν•©μ΄ μ™„λ£λλ©΄, ν”„λ΅μ νΈκ°€ μ •μƒμ μΌλ΅ λ™μ‘ν•λ”μ§€ λ°λ“μ‹ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤.

```bash
# 1. μμ΅΄μ„± μ¬μ„¤μΉ
npm install

# 2. μ „μ²΄ ν”„λ΅μ νΈ μ»΄νμΌ
npm run compile

# 3. μ „μ²΄ ν…μ¤νΈ μ‹¤ν–‰
npm run test
```

μ΄ κ³Όμ •μ—μ„ μ¤λ¥κ°€ λ°μƒν•λ‹¤λ©΄, μ•„λ 'λ¬Έμ  ν•΄κ²°' μ„Ήμ…μ„ μ°Έμ΅°ν•κ±°λ‚ μ¶©λ ν•΄κ²° κ³Όμ •μ— μ‹¤μκ°€ μ—†μ—λ”μ§€ λ‹¤μ‹ ν™•μΈν•©λ‹λ‹¤.

---

## 4. λ¬Έμ  ν•΄κ²° (Troubleshooting)

### π¨ μ•λ ¤μ§„ λ¬Έμ : Windows ν™κ²½μ—μ„μ `protoc` λΉλ“ μ¤λ¥

Windows ν™κ²½μ—μ„ `npm run compile` λλ” `cline` λ…λ¦½ λΉλ“λ¥Ό μ‹λ„ν•  λ•, `protoc` κ΄€λ ¨ μ¤λ¥(`status: 3221225781` λλ” `MODULE_NOT_FOUND`)κ°€ λ°μƒν•λ©° λΉλ“κ°€ μ‹¤ν¨ν•  μ μμµλ‹λ‹¤.

- **μ›μΈ**: `cline`μ΄ μ‚¬μ©ν•λ” `grpc-tools` ν¨ν‚¤μ§€μ `protoc` λ°”μ΄λ„λ¦¬κ°€ νΉμ • Windows ν™κ²½κ³Ό νΈν™λμ§€ μ•κ±°λ‚, κ΄€λ ¨ μ‹¤ν–‰ νμΌμ„ μ°Ύμ§€ λ»ν•΄ λ°μƒν•λ” λ¬Έμ μ…λ‹λ‹¤.
- **ν•΄κ²° λ°©μ•**: `caret-zero` ν”„λ΅μ νΈμ— ν¬ν•¨λ Windows νΈν™ λΉλ“ μ¤ν¬λ¦½νΈμ™€ μ‹¤ν–‰ νμΌμ„ `cline` λ””λ ‰ν† λ¦¬μ— λ³µμ‚¬ν•©λ‹λ‹¤.

#### **μ΅°μΉ λ°©λ²•**

1.  **νμΌ λ³µμ‚¬**: μ•„λ κ²½λ΅μ— μλ” **νμΌκ³Ό ν΄λ”λ¥Ό λ¨λ‘** λ³µμ‚¬ν•©λ‹λ‹¤.
    -   **μ›λ³Έ νμΌ**: `docs/development/resources/build-proto.js`
    -   **μ›λ³Έ ν΄λ”**: `docs/development/resources/protoc-31.0-win64`

2.  **νμΌ λ¶™μ—¬λ„£κΈ°**: λ³µμ‚¬ν• νμΌκ³Ό ν΄λ”λ¥Ό `cline`μ `proto` λ””λ ‰ν† λ¦¬μ— λ®μ–΄μ”λ‹λ‹¤.
    -   **λ€μƒ**: `cline/proto/`

μ„μ™€ κ°™μ΄ μ΅°μΉν• ν›„ λ‹¤μ‹ λΉλ“λ¥Ό μ‹λ„ν•λ©΄ μ •μƒμ μΌλ΅ μ§„ν–‰λ©λ‹λ‹¤. `cline`μ„ μƒλ΅ λ³‘ν•©ν•  λ•λ§λ‹¤ μ΄ νμΌλ“¤μ΄ λ‹¤μ‹ μ›λ³ΈμΌλ΅ λ®μ–΄μ¨μ§ μ μμΌλ―€λ΅, μ¤λ¥ λ°μƒ μ‹ μ΄ κ°€μ΄λ“λ¥Ό λ‹¤μ‹ ν™•μΈν•΄ μ£Όμ„Έμ”. 